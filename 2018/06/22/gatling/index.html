<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="星星独立博客" />



<meta name="description" content="Gatling 介绍Gatling是一款基于Scala开发的高性能服务器性能测试工具，它主要用于对服务器进行负载等测试，并分析和测量服务器的各种性能指标。 Gatling 特点   Gatling主要用于测量基于HTTP的服务器，比如Web应用程序，RESTful服务等，除此之外它拥有以下特点： 支持Akka Actors和Async IO，从而能达到很高的性能支持Akka Actors 和Asy">
<meta property="og:type" content="article">
<meta property="og:title" content="看码农如何一点一点了解Gatling并战胜他">
<meta property="og:url" content="http://anzhongguancha.cn/2018/06/22/gatling/index.html">
<meta property="og:site_name" content="星星独立博客">
<meta property="og:description" content="Gatling 介绍Gatling是一款基于Scala开发的高性能服务器性能测试工具，它主要用于对服务器进行负载等测试，并分析和测量服务器的各种性能指标。 Gatling 特点   Gatling主要用于测量基于HTTP的服务器，比如Web应用程序，RESTful服务等，除此之外它拥有以下特点： 支持Akka Actors和Async IO，从而能达到很高的性能支持Akka Actors 和Asy">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-06-22T09:19:19.841Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="看码农如何一点一点了解Gatling并战胜他">
<meta name="twitter:description" content="Gatling 介绍Gatling是一款基于Scala开发的高性能服务器性能测试工具，它主要用于对服务器进行负载等测试，并分析和测量服务器的各种性能指标。 Gatling 特点   Gatling主要用于测量基于HTTP的服务器，比如Web应用程序，RESTful服务等，除此之外它拥有以下特点： 支持Akka Actors和Async IO，从而能达到很高的性能支持Akka Actors 和Asy">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="星星独立博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>看码农如何一点一点了解Gatling并战胜他 | 星星独立博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: 
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.gif" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">星星独立博客</a></h1>
        </hgroup>

        
        <p class="header-subtitle">我是一个集帅气与智慧于一身的美男子</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:645667209@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/RichSuperMan" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">和我一起探索宇宙的奥秘</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">星星独立博客</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.gif" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">星星独立博客</a></h1>
            </hgroup>
            
            <p class="header-subtitle">我是一个集帅气与智慧于一身的美男子</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:645667209@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/RichSuperMan" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-gatling" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/22/gatling/" class="article-date">
      <time datetime="2018-06-22T09:16:04.178Z" itemprop="datePublished">2018-06-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      看码农如何一点一点了解Gatling并战胜他
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Gatling-介绍"><a href="#Gatling-介绍" class="headerlink" title="Gatling 介绍"></a>Gatling 介绍</h2><pre><code>Gatling是一款基于Scala开发的高性能服务器性能测试工具，它主要用于对服务器进行负载等测试，并分析和测量服务器的各种性能指标。
</code></pre><h3 id="Gatling-特点"><a href="#Gatling-特点" class="headerlink" title="Gatling 特点"></a>Gatling 特点</h3><p>   Gatling主要用于测量基于HTTP的服务器，比如Web应用程序，RESTful服务等，除此之外它拥有以下特点：</p>
<pre><code>支持Akka Actors和Async IO，从而能达到很高的性能支持Akka Actors 和Async IO，从而能达到很高的性能
支持实时生成Html动态轻量报表，从而使报表更易阅读和进行数据分析
支持DSL脚本，从而使测试脚本更易开发与维护
支持录制并生成测试脚本，从而可以方便的生成测试脚本 
支持导入HAR（Http Archive）并生成测试脚本 
支持Maven，Eclipse，IntelliJ等，以便于开发
支持Jenkins，以便于进行持续集成
支持插件，从而可以扩展其功能，比如可以扩展对其他协议的支持 
开源免费
</code></pre><h3 id="Gatling使用场景"><a href="#Gatling使用场景" class="headerlink" title="Gatling使用场景"></a>Gatling使用场景</h3><pre><code>测试需求经常改变，测试脚本需要经常维护；
测试环境的客户机性能不强，但又希望发挥硬件的极限性能；
能对测试脚本进行很好的版本管理，并通过CI进行持续的性能测试；
希望测试结果轻量易读等
</code></pre><h2 id="Gatling-使用"><a href="#Gatling-使用" class="headerlink" title="Gatling 使用"></a>Gatling 使用</h2><h3 id="Gatling-安装"><a href="#Gatling-安装" class="headerlink" title="Gatling 安装"></a>Gatling 安装</h3><ul>
<li>配置环境变量</li>
</ul>
<pre><code>配置JDK环境变量
  1. 我在oracle 官网下载的 jdk1.7.0_79
  2. 配置JDK环境变量：
      1. JAVA_HOME    D:\Program Files\Java\jdk1.7.0_79
      2. CLASSPATH    .;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;
      3. PATH         %JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;
配置SCALA环境变量
  1. scala 官网目前打不开，我是在csdn 上找的资源
  2. 配置scala 环境变量：
      1. SCALA_HOME  D:\scala-2.11.7
      2. PATH        %SCALA_HOME%/bin;
ps:
   (JDK1.7 对应 scala2.11.X 对应 gatling 2.1.X 版本)
</code></pre><ul>
<li>安装idea scala 插件<br>   首先确保你已安装idea 开发工具，我使用的是Intellij 14.1.4。</li>
<li><p>打开IDEA14.1.4,创建maven项目 File –&gt; New –&gt; Project –&gt; maven </p>
</li>
<li><p>然后选择 NEXT,输入 GroupID 、ArtifactID、Version</p>
</li>
<li>安装scala 插件。选择File –&gt; Settings</li>
<li>配置 当前项目在Idea 中 jdk信息、scala信息、maven 信息</li>
</ul>
<h3 id="Gatling-项目配置"><a href="#Gatling-项目配置" class="headerlink" title="Gatling 项目配置"></a>Gatling 项目配置</h3><ul>
<li><p>打开POM 文件，配置Gatling 项目相关依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.allwin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.gatling.highcharts<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gatling-charts-highcharts<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.alchim31.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>scala-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.gatling<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gatling-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">simulationsFolder</span>&gt;</span>$&#123;user.dir&#125;/src/test/scala<span class="tag">&lt;/<span class="name">simulationsFolder</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">simulationClass</span>&gt;</span>com.allwin.CrmSimulation<span class="tag">&lt;/<span class="name">simulationClass</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>test<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goal</span>&gt;</span>execute<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置日志文件 src –&gt; test –&gt; logback.xml</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"CONSOLE"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;HH:mm:ss.SSS&#125; [%-5level] %logger&#123;15&#125; - %msg%n%rEx<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">immediateFlush</span>&gt;</span>false<span class="tag">&lt;/<span class="name">immediateFlush</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Uncomment for logging ALL HTTP request and responses --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"io.gatling.http.ahc"</span> <span class="attr">level</span>=<span class="string">"TRACE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"io.gatling.http.response"</span> <span class="attr">level</span>=<span class="string">"TRACE"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Uncomment for logging ONLY FAILED HTTP request and responses --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"io.gatling.http.ahc"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"io.gatling.http.response"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"WARN"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>创建scala包文件 src –&gt; test –&gt; scala </li>
</ul>
<h3 id="Gatling开发"><a href="#Gatling开发" class="headerlink" title="Gatling开发"></a>Gatling开发</h3><ul>
<li>实例一：<ul>
<li>在src –&gt; test –&gt; scala –&gt; com –&gt; allwin 创建 TestSimulation.scala </li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">package com.allwin</span><br><span class="line"></span><br><span class="line">import io.gatling.core.Predef._</span><br><span class="line">import io.gatling.http.Predef._</span><br><span class="line">/**</span><br><span class="line"> * Created by sunhongrui on 2018/3/8.</span><br><span class="line"> *</span><br><span class="line"> * Simulation:</span><br><span class="line"> *       1. http 协议设置</span><br><span class="line"> *       2. http header设置</span><br><span class="line"> *       3. 定义场景</span><br><span class="line"> *       4. 场景负载</span><br><span class="line"> */</span><br><span class="line">class TestSimulation extends Simulation&#123;</span><br><span class="line">  //随机获取search.csv 中的值 动态数据feeder</span><br><span class="line">  var feederCvs = csv("search.csv").random</span><br><span class="line"></span><br><span class="line">   //  1. http 协议  设置</span><br><span class="line">   var httpConf = http.baseURL("http://computer-database.gatling.io")</span><br><span class="line">     .acceptHeader("text/html,application/xhtml+xml,application/xml;</span><br><span class="line">        q=0.9,*/*;q=0.8")         //浏览器端可以接受的媒体类型</span><br><span class="line">     .doNotTrackHeader("1")       // 是否跟踪</span><br><span class="line">     .acceptLanguageHeader("en-US,en;q=0.5")     // 请求头语言</span><br><span class="line">     .acceptEncodingHeader("gzip, deflate, br")   // 编码方式是否支持gzip压缩</span><br><span class="line">     .userAgentHeader("Mozilla/5.0 (Windows NT 5.1; rv:31.0) Gecko/20100101 Firefox/31.0") //浏览器版本</span><br><span class="line"></span><br><span class="line">   //  2. http header 设置</span><br><span class="line">   var headers_01 = Map(" Content‐Type" -&gt; </span><br><span class="line">         "application/x‐www‐form‐urlencoded; charset=UTF‐8")</span><br><span class="line">   var headers_02 = Map(" Content‐Type" -&gt; "application/json")</span><br><span class="line">   var headers_03 = Map("Accept" -&gt; "text/html,application/xhtml+xml,</span><br><span class="line">         application/xml;q=0.9,*/*;q=0.8")</span><br><span class="line"></span><br><span class="line">   // 3. 定义场景</span><br><span class="line">   var scn = scenario("BasicSimulation")</span><br><span class="line">     .exec(http("request_1")</span><br><span class="line">       .get("/")</span><br><span class="line">       .check(status.is(200))</span><br><span class="line">     )</span><br><span class="line">     .pause(5) //暂停5秒</span><br><span class="line">     .feed(feederCvs)</span><br><span class="line">     .exec(http("request_2")</span><br><span class="line">       .get("/computers?f=$&#123;searchCriterion&#125;")</span><br><span class="line">       .check(css("a:contains('$&#123;searchComputerName&#125;')",</span><br><span class="line">            "href").saveAs("computerURL")))</span><br><span class="line">     .pause(1)</span><br><span class="line">     .exec(http("request_3")</span><br><span class="line">       .get("$&#123;computerURL&#125;"))</span><br><span class="line">       .pause(1)</span><br><span class="line">  // 4. 场景负载</span><br><span class="line">  setUp(scn.inject(atOnceUsers(1)).protocols(httpConf))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>实例二(对Crm 项目部分流程进行测试)<ul>
<li>在src –&gt; test –&gt; scala –&gt; com –&gt; allwin 创建 CrmSimulation.scala </li>
<li>在src –&gt; test –&gt; resource –&gt; data 创建user.csv 文件</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">package com.allwin</span><br><span class="line"></span><br><span class="line">import io.gatling.core.Predef._</span><br><span class="line">import io.gatling.http.Predef._</span><br><span class="line">import java.util.concurrent.ThreadLocalRandom</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by sunhongrui on 2018/3/8.</span><br><span class="line"> */</span><br><span class="line">class CrmSimulation extends Simulation&#123;</span><br><span class="line"></span><br><span class="line">  var feeder = csv("user.csv").random  </span><br><span class="line">  //var jsonFeeder = jsonFile("loadMember.json")</span><br><span class="line">  val httpConf = http</span><br><span class="line">    .baseURL("http://localhost:8090/rest")</span><br><span class="line">    .acceptHeader("*/*")</span><br><span class="line">    .doNotTrackHeader("1")</span><br><span class="line">    .acceptLanguageHeader("zh-CN,zh;q=0.9")</span><br><span class="line">    .acceptEncodingHeader("gzip, deflate, br")</span><br><span class="line">    .userAgentHeader("Mozilla/5.0 (Windows NT 5.1; rv:31.0) Gecko/20100101 Firefox/31.0")</span><br><span class="line"></span><br><span class="line">  var headers_0 = Map("Accept" -&gt; "text/html,application/xhtml+xml,</span><br><span class="line">            application/x-www-form-urlencoded,application/xml,</span><br><span class="line">            application/json;q=0.9,*/*;q=0.8")</span><br><span class="line">  var headers_02 = Map("Accept" -&gt; "application/json;charset=UTF-8")</span><br><span class="line">  var headers_03 =  Map("Accept" -&gt; "application/x-www-form-urlencoded")</span><br><span class="line">  var scn = scenario("indexPage")</span><br><span class="line">      //进入crm首页(登录页面)</span><br><span class="line">      .exec(http("index")</span><br><span class="line">      .get("/pageUrl/index")</span><br><span class="line">      .headers(headers_0)</span><br><span class="line">      .check(status.is(200)))</span><br><span class="line">      //登录操作</span><br><span class="line">      .pause(1 ,20 ) //暂停1 - 20 秒</span><br><span class="line">      .feed(feeder)  //加载csv 文件数据</span><br><span class="line">      .exec(http("validLogin")</span><br><span class="line">      .get("/user/validLogin?userName=$&#123;userName&#125;&amp;password=$&#123;password&#125;")</span><br><span class="line">      .headers(headers_0)</span><br><span class="line">      .check(regex("success1")))</span><br><span class="line">      //进入会员管理页面</span><br><span class="line">      .exec(http("member")</span><br><span class="line">      .get("/member/openMemberNavigationPage")</span><br><span class="line">      .headers(headers_0)</span><br><span class="line">      .check(status.is(200)))</span><br><span class="line">      .pause(2)</span><br><span class="line">      //会员管理查询提交</span><br><span class="line">      //.feed(jsonFeeder)</span><br><span class="line">      .exec(http("memberSumbit")</span><br><span class="line">      .post("/member/loadMemberNavigation")</span><br><span class="line">      .formParam("mo" , StringBody("""&#123;</span><br><span class="line">            "organName": "",</span><br><span class="line">            "busiBigType": "",</span><br><span class="line">            "currentState": "",</span><br><span class="line">            "memberBigType": "",</span><br><span class="line">            "isLogin": "",</span><br><span class="line">            "area": "",</span><br><span class="line">            "isNewMember": "",</span><br><span class="line">            "orderBy": "",</span><br><span class="line">            "interfaceState": "",</span><br><span class="line">            "isPay": "",</span><br><span class="line">            "loginMode": "0",</span><br><span class="line">            "startIndex": 0,</span><br><span class="line">            "pageSize": 10</span><br><span class="line">       &#125;"""))</span><br><span class="line">      .headers(headers_02)</span><br><span class="line">      .check(status.is(200))</span><br><span class="line">      .check(jsonPath("$.data[0].moId").saveAs("moId"))</span><br><span class="line">      .check(jsonPath("$.data[0].organName").saveAs("organName"))</span><br><span class="line">       )</span><br><span class="line">       .pause(2)</span><br><span class="line">       .exec(http("openTabListMemberPage")</span><br><span class="line">       .get("/member/openTabListMemberPage?moId=$&#123;moId&#125;&amp;organName=$&#123;organName&#125;&amp;pos=p2")</span><br><span class="line">       .headers(headers_0)</span><br><span class="line">       .check(status.is(200)))</span><br><span class="line"></span><br><span class="line">  setUp(scn.inject(atOnceUsers(1))).protocols(httpConf)</span><br><span class="line"></span><br><span class="line">  before&#123;</span><br><span class="line">    println("------  CRM系统gatling测试开始 ------")</span><br><span class="line">  &#125;</span><br><span class="line">  after&#123;</span><br><span class="line">    println("------  CRM系统gatling测试结束 ------")</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Gatling-Api"><a href="#Gatling-Api" class="headerlink" title="Gatling Api"></a>Gatling Api</h2><h3 id="提交方式"><a href="#提交方式" class="headerlink" title="提交方式"></a>提交方式</h3><ul>
<li><p>默认方式</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var scn = scenario("indexPage")</span><br><span class="line">      .exec(http("validLogin")</span><br><span class="line">      .get("/user/validLogin?userName=XXX&amp;password=YYY")</span><br></pre></td></tr></table></figure>
</li>
<li><p>JSON 提交方式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.body(StringBody("&#123;\"orderNo\":201519828113&#125;")).asJSON)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Form 提交方式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.formParam("参数名称" , "参数值")</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="使用Feeder-实现数据动态化"><a href="#使用Feeder-实现数据动态化" class="headerlink" title="使用Feeder 实现数据动态化"></a>使用Feeder 实现数据动态化</h3><ul>
<li><p>数组</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">val feeder = Array(</span><br><span class="line">  Map("foo" -&gt; "foo1", "bar" -&gt; "bar1"),</span><br><span class="line">  Map("foo" -&gt; "foo2", "bar" -&gt; "bar2"),</span><br><span class="line">  Map("foo" -&gt; "foo3", "bar" -&gt; "bar3")).random</span><br></pre></td></tr></table></figure>
<ul>
<li>参数选取形式:<ol>
<li>queue   //顺序调用，跑到最后一个时就会报错终止</li>
<li>random  //随机调用</li>
<li>cirular //顺序循环调用</li>
</ol>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>CSV 文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//文件必须在%Gatling_Home%/user-files/data/</span><br><span class="line">var csvFeeder = cvs("user.csv")</span><br></pre></td></tr></table></figure>
</li>
<li><p>JSON 文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val jsonFileFeeder = jsonFile("foo.json")</span><br><span class="line">val jsonUrlFeeder = jsonUrl("http://me.com/foo.json")</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>json的形式：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"id"</span>:<span class="number">19434</span>,</span><br><span class="line">        <span class="attr">"foo"</span>:<span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"id"</span>:<span class="number">19435</span>,</span><br><span class="line">        <span class="attr">"foo"</span>:<span class="number">2</span></span><br><span class="line">      &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>JDBC</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbcFeeder("databaseUrl", "username", "password", "SELECT * FROM users")</span><br></pre></td></tr></table></figure>
</li>
<li><p>redis</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import com.redis._</span><br><span class="line">import io.gatling.redis.feeder.RedisFeeder</span><br><span class="line"></span><br><span class="line">val redisPool = new RedisClientPool("localhost", 6379)</span><br><span class="line">val feeder = RedisFeeder(redisPool, "foo")</span><br></pre></td></tr></table></figure>
<p><a href="https://gatling.io/docs/current/session/feeder/#feeder" title="Feeder 具体信息" target="_blank" rel="noopener">Feeder 具体使用信息</a></p>
<h3 id="从请求中获取"><a href="#从请求中获取" class="headerlink" title="从请求中获取"></a>从请求中获取</h3><h3 id="用各种JAVA函数生成"><a href="#用各种JAVA函数生成" class="headerlink" title="用各种JAVA函数生成"></a>用各种JAVA函数生成</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import io.gatling.core.Predef._</span><br><span class="line">import io.gatling.http.Predef._</span><br><span class="line">import scala.concurrent.duration._</span><br><span class="line">import java.util.concurrent.ThreadLocalRandom  //引用java的库，用于生成随机数</span><br><span class="line"> </span><br><span class="line">class BasicSimulation extends Simulation &#123; </span><br><span class="line">    ////定义一个生成随机数的函数</span><br><span class="line">  def getRand(i: Int) : String = </span><br><span class="line">            ThreadLocalRandom.current.nextInt(i).toString</span><br><span class="line">  val httpConf = http</span><br><span class="line">    .baseURL("http://192.168.0.11") </span><br><span class="line">   .acceptHeader("text/html,application/xhtml+xml,</span><br><span class="line">            application/xml;q=0.9,*/*;q=0.8")</span><br><span class="line">    .doNotTrackHeader("1")</span><br><span class="line">    .acceptLanguageHeader("en-US,en;q=0.5")</span><br><span class="line">    .acceptEncodingHeader("gzip, deflate")</span><br><span class="line">    .userAgentHeader("Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8;</span><br><span class="line">            rv:16.0) Gecko/20100101 Firefox/16.0")</span><br><span class="line"> </span><br><span class="line">  val headers_1 = Map("Content-Type" -&gt; </span><br><span class="line">            "application/x-www-form-urlencoded")</span><br><span class="line">  val scn = scenario("Hello Gatling")</span><br><span class="line">    //.exec( session =&gt; session.set("RAND", getRand(100000000) ) )</span><br><span class="line">    // 这才是定义“变量”，在Gatling中用变量就好像把它们作为属性或者元素一样，</span><br><span class="line">    // 注意，不能用randnum代替getRand(100000000)，否则这个就只会计算一次。</span><br><span class="line">    .exec(_.set("RAND", getRand(100000000) ) )</span><br><span class="line">    //这样写也可以，可怕的scala语法</span><br><span class="line">    .exec(_.set("r", "\r" ) )</span><br><span class="line">    //"""...."""中的换行符是\n，如果要加\r，则也得这么用“变量”的方式做，</span><br><span class="line">    //"""里不能反转义。。。</span><br><span class="line">    .exec(   </span><br><span class="line">       http("post's example")</span><br><span class="line">      .post("/api/getconf.json?mid=$&#123;RAND&#125;&amp;ver=1.0")</span><br><span class="line">    //在URL中用变量，如果$&#123;RAND&#125;在一次请求中被调用多次，</span><br><span class="line">    //每次的结果也是一样的，而jmeter的函数则会每次都变化</span><br><span class="line">    //.post("/api/getconf.json?mid="+getRand(100000000)+"&amp;ver=1.0")</span><br><span class="line">    //如果这样写，字符串+函数返回值，这样的话getRand(100000000)就只会计算一次了    </span><br><span class="line">      .headers(headers_1)</span><br><span class="line">      .body(StringBody("""&#123;</span><br><span class="line">            "audit_control_list" : [],</span><br><span class="line">            "sd" : [ "sd_settings",$&#123;RAND&#125;]</span><br><span class="line">            &#125;""")).asJSON</span><br><span class="line">    //在body中使用变量，因为用了"""..."""来包含字符串，</span><br><span class="line">    //所以它里面用其他比如getRand(100000000)之类的结果都是直接输出这个字符串而已</span><br><span class="line">    //.body(StringBody(_=&gt;getRand(100000000)+"dsds"))</span><br><span class="line">    //如果要在body中做字符串拼接，这样就可以，也可以用.concat，scala的语法。</span><br><span class="line">    //_=&gt;这个符号表示scala的模式匹配表达式，是为了让每次循环时都计算新的随机数</span><br><span class="line">    //.body(StringBody("dsds"+_=&gt;getRand(100000000)))//反过来这样写就不行</span><br><span class="line">    //.body(StringBody("dsds$&#123;RAND&#125;"))//用变量也可以</span><br><span class="line">    //.queryParam("name" ,_=&gt;getRand(100000000))</span><br><span class="line">    //或者单独作为参数写也可以，如果写成getRand(100000000)，</span><br><span class="line">    //那么测试时只会生成一次随机数</span><br><span class="line">       .queryParam("name" ,"$&#123;RAND&#125;")</span><br></pre></td></tr></table></figure>
<p><a href="http://gatling.io/docs/2.1.7/session/feeder.html#feeder" title="Feeder相关" target="_blank" rel="noopener">Feeder相关</a></p>
<h3 id="Gatling-循环"><a href="#Gatling-循环" class="headerlink" title="Gatling 循环"></a>Gatling 循环</h3><pre><code>方式一：循环多少次
repeat(times，counterName)
    time：循环次数
    counterName：计数器名称，可选参数。

方式二：循环多长时间
during(duration, counterName, exitASAP)
    duration：时长，默认单位秒，可以加单位。millseconds，表示毫秒
    counterName：计数器名称，可选参数
    exitASAP:默认为true,当这个为false的时候循环直接跳出
</code></pre><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一：循环100次</span></span><br><span class="line"><span class="keyword">val</span> scn = scenario(<span class="string">"BaiduSimulation"</span>).repeat(<span class="number">100</span>)&#123;</span><br><span class="line">    exec(http(<span class="string">"baidu_home"</span>).get(<span class="string">"/"</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方式二：运行100秒</span></span><br><span class="line"><span class="keyword">val</span> scn2=scenario(<span class="string">"BaiduSimulation2"</span>).during(<span class="number">100</span>)&#123;</span><br><span class="line">    exec(http(<span class="string">"baidu_home"</span>).get(<span class="string">"/"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>数据分页 </li>
</ul>
  <figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//没用repeat之前操作数据分页</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Browse</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gotoPage</span></span>(page: <span class="type">Int</span>) = </span><br><span class="line">        exec(http(<span class="string">"Page "</span>+page).get(<span class="string">"/computers?p="</span>+page))</span><br><span class="line">        .pause(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">val</span> browse=exec(gotoPage(<span class="number">0</span>), gotoPage(<span class="number">1</span>), gotoPage(<span class="number">2</span>),gotoPage(<span class="number">3</span>), gotoPage(<span class="number">4</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用repeat之后操作数据分页</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Browse</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> browse = repeat(<span class="number">5</span>, <span class="string">"n"</span>) &#123; </span><br><span class="line">    <span class="comment">// repeat是一个runtime类封装好的循环方法，这里就是循环5次，然后保存到用户会话中；</span></span><br><span class="line">        exec(http(<span class="string">"Page $&#123;n&#125;"</span>)</span><br><span class="line">            .get(<span class="string">"/computers?p=$&#123;n&#125;"</span></span><br><span class="line">        )) </span><br><span class="line">    <span class="comment">//使用EL方法来实现访问第几页；</span></span><br><span class="line">    .pause(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="http://gatling.io/docs/2.1.7/general/scenario.html#scenario-loops" title="Gatling 循环" target="_blank" rel="noopener">Gatling 循环</a></p>
<h3 id="Hook-函数"><a href="#Hook-函数" class="headerlink" title="Hook 函数"></a>Hook 函数</h3><pre><code>before： 在你的Simulation执行之前执行
after ： 在你的Simulation执行之后执行
</code></pre><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">before&#123;</span><br><span class="line">    println(<span class="string">"------  CRM系统gatling测试开始 ------"</span>)</span><br><span class="line">&#125;</span><br><span class="line">after&#123;</span><br><span class="line">    println(<span class="string">"------  CRM系统gatling测试结束 ------"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="场景拆分"><a href="#场景拆分" class="headerlink" title="场景拆分"></a>场景拆分</h3><pre><code>将系统按照模块进行拆分
例如：
    Search : 搜索模块
    Browse : 展示模块
    Edit ：  编辑模块
</code></pre><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Search</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> search = exec(http(<span class="string">"Home"</span>) .get(<span class="string">"/"</span>))</span><br><span class="line">        .pause(<span class="number">7</span>)</span><br><span class="line">        .exec(http(<span class="string">"Search"</span>)</span><br><span class="line">        .get(<span class="string">"/computers?f=macbook"</span>))</span><br><span class="line">        .pause(<span class="number">2</span>)</span><br><span class="line">        .exec(http(<span class="string">"Select"</span>)</span><br><span class="line">        .get(<span class="string">"/computers/6"</span>))</span><br><span class="line">        .pause(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Browse</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> search = ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Edit</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> search = ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> scn=scenario(<span class="string">"Scenario Name"</span>)</span><br><span class="line">    .exec(<span class="type">Search</span>.search,<span class="type">Browse</span>.browse,<span class="type">Edit</span>.edit)</span><br></pre></td></tr></table></figure>
<h3 id="配置虚拟用户"><a href="#配置虚拟用户" class="headerlink" title="配置虚拟用户"></a>配置虚拟用户</h3><pre><code>测试用户可以按照权限分为普通用户、管理员用户两个用户群体：
    普通用户：他们只能对search和browse 模块 进行操作
    管理员用户：他们能对 search、browse和edit 模块进行操作：
</code></pre><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> users = scenario(<span class="string">"Users"</span>).exec(<span class="type">Search</span>.search,</span><br><span class="line">            <span class="type">Browse</span>.browse)</span><br><span class="line"><span class="keyword">val</span> admins = scenario(<span class="string">"Admins"</span>).exec(<span class="type">Search</span>.search,</span><br><span class="line">            <span class="type">Browse</span>.browse,<span class="type">Edit</span>.edit)</span><br><span class="line"><span class="comment">//写法一</span></span><br><span class="line">setUp(users.inject(atOnceUsers(<span class="number">10</span>)).protocols(httpConf))</span><br><span class="line"><span class="comment">//写法二</span></span><br><span class="line">setUp(</span><br><span class="line">        users.inject(rampUsers(<span class="number">10</span>) over (<span class="number">10</span>seconds)),</span><br><span class="line">        admins.inject(rampUsers(<span class="number">2</span>) over (<span class="number">10</span>seconds)))</span><br><span class="line">    .protocols(httpConf)</span><br></pre></td></tr></table></figure>
<h3 id="check的使用和场景失败的处理"><a href="#check的使用和场景失败的处理" class="headerlink" title="check的使用和场景失败的处理"></a>check的使用和场景失败的处理</h3><p><a href="http://gatling.io/docs/2.1.7/session/feeder.html#feeder" title="Http Check相关" target="_blank" rel="noopener">Http Check相关</a></p>
<ul>
<li>场景失败的处理</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.<span class="type">ThreadLocalRandom</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. 引入ThreadLocalRandom来生成随机值</span></span><br><span class="line"><span class="comment"> * 2. 是用lambda函数去定义一个返回值。这里一直返回200或者201。</span></span><br><span class="line"><span class="comment"> * 3. 当返回200时，我们检查的是201的时候，check就失败了</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">val</span> edit = exec(http(<span class="string">"Form"</span>)</span><br><span class="line">        .get(<span class="string">"/computers/new"</span>))</span><br><span class="line">    .pause(<span class="number">1</span>)</span><br><span class="line">    .exec(http(<span class="string">"Post"</span>)</span><br><span class="line">        .post(<span class="string">"/computers"</span>)</span><br><span class="line">        .check(status.is</span><br><span class="line">           (session =&gt; <span class="number">200</span> + <span class="type">ThreadLocalRandom</span>.current.nextInt(<span class="number">2</span>)))</span><br><span class="line">) </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 失败管理场景：</span></span><br><span class="line"><span class="comment">  *  1. ryMax(time)&#123;chain&#125;  重试直到成功一直到设置的最大值为止，</span></span><br><span class="line"><span class="comment">  *  2. exitBlockOnFail&#123;chain&#125; 如果失败就退出当前执行块，继续执行下边的动作</span></span><br><span class="line"><span class="comment">  *  3. exitHereIfFailed  直接退出失败</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">var</span> tryMaxEdit = tryMax(<span class="number">2</span>)&#123;  <span class="comment">//如果失败，重试2次</span></span><br><span class="line">    exec(edit)</span><br><span class="line">&#125;.exitHereIfFailed <span class="comment">//2次都不成功直接退出整个Scenario</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tryExitBlock = &#123;</span><br><span class="line">    exec(...)</span><br><span class="line">    exitBlockOnFail&#123;</span><br><span class="line">        exec(...)</span><br><span class="line">    &#125;</span><br><span class="line">    exec(...) <span class="comment">//这里继续会执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://gatling.io/docs/current/general/scenario/#scenario-conditions" title="场景条件相关" target="_blank" rel="noopener">场景条件相关</a></p>
<h3 id="测试操作"><a href="#测试操作" class="headerlink" title="测试操作"></a>测试操作</h3>  <figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">setUp(</span><br><span class="line">    scn.inject(</span><br><span class="line">        nothingFor(<span class="number">4</span> seconds), </span><br><span class="line">        atOnceUsers(<span class="number">10</span>), </span><br><span class="line">        rampUsers(<span class="number">10</span>) over(<span class="number">5</span> seconds),</span><br><span class="line">        constantUsersPerSec(<span class="number">20</span>) during(<span class="number">15</span>seconds), </span><br><span class="line">        constantUsersPerSec(<span class="number">20</span>) during(<span class="number">15</span>seconds) randomized, </span><br><span class="line">        rampUsersPerSec(<span class="number">10</span>) to20during(<span class="number">10</span>minutes), </span><br><span class="line">        rampUsersPerSec(<span class="number">10</span>) to20during(<span class="number">10</span>minutes) randomized, </span><br><span class="line">        splitUsers(<span class="number">1000</span>) into(rampUsers(<span class="number">10</span>) over(<span class="number">10</span>seconds)) </span><br><span class="line">            separatedBy(<span class="number">10</span>seconds), </span><br><span class="line">        splitUsers(<span class="number">1000</span>) into(rampUsers(<span class="number">10</span>) over(<span class="number">10</span>seconds)) </span><br><span class="line">            separatedBy atOnceUsers(<span class="number">30</span>), </span><br><span class="line">        heavisideUsers(<span class="number">1000</span>) over(<span class="number">20</span>seconds) </span><br><span class="line">    ).protocols(httpConf)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>具体内容解释：</p>
<pre><code>nothingFor(duration) : 
        设置一段停止时间
atOnceUsers(nbUsers) : 
        立即注入一定数量的虚拟用户
rampUsers(nbUsers) over(duration)：
        在指定时间内，设置一定数量逐步注入的虚拟用户；
constantUsersPerSec(rate) during(duration)：
        定义一个在每秒钟恒定的并发用户数，持续指定的时间；
constantUsersPerSec(rate) during(duration) randomized
        ：定义一个在每秒钟围绕指定并发数随机增减的并发，持续指定时间；
rampUsersPerSec(rate1) to (rate2) during(duration)
        ：定义一个并发数区间，运行指定时间，并发增长的周期是一个规律的值；
rampUsersPerSec(rate1) to(rate2) during(duration) randomized
        ：定义一个并发数区间，运行指定时间，并发增长的周期是一个随机的值；
heavisideUsers(nbUsers) over(duration)
        ：定义一个持续的并发，围绕和海维赛德函数平滑逼近的增长量，持续指定时间
splitUsers(nbUsers) into(injectionStep) separatedBy(duration)
        ：定义一个周期，执行injectionStep里面的注入，将nbUsers的请求平均分配；
splitUsers(nbUsers) into(injectionStep1) separatedBy(injectionStep2)
        ：使用injectionStep2的注入作为周期，分隔injectionStep1的注入，
            直到用户数达到nbUsers；
</code></pre><h2 id="Gatling-报告介绍"><a href="#Gatling-报告介绍" class="headerlink" title="Gatling 报告介绍"></a>Gatling 报告介绍</h2><h3 id="启动测试"><a href="#启动测试" class="headerlink" title="启动测试"></a>启动测试</h3><pre><code>1. 使用maven命令 mvn gatling：execute 
2. 查看控制台信息是否有异常
3. 如果没有异常，则在target --&gt; gatling --&gt; returns 
</code></pre><h3 id="报告信息"><a href="#报告信息" class="headerlink" title="报告信息"></a>报告信息</h3><pre><code>Gatling测试报表基于HTML，并且在测试过程中已生成，所以打开速度很快。
Gatling 的报表分为两类：
        1. GLOBAL  所有请求相关的统计数据，比如每秒请求数，请求成功与失败数等。
        2. DETAILS 具体请求相关的统计数据，比如请求响应时间，请求响应延迟时间等。

    Requests 请求信息
    Executions 
        Total : 请求总数
        OK： 成功次数
        KO : 失败次数
        %KO : 失败率
        Req/s: 每秒请求数
    Response Time(ms) 返回时间
        Min : 最短请求响应时间
        MAX : 最长请求响应时间
        Mean ： 平均请求响应时间
        Std Dev ： 方差偏移
</code></pre><ul>
<li>用户活跃度</li>
<li>响应时间分布 </li>
<li>响应时间分布百分比</li>
<li>每秒请求数</li>
<li>每秒响应数 </li>
<li>随着时间推移，延迟百分数!<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><a href="https://gatling.io/" title="Gatling 官网" target="_blank" rel="noopener">Gatling 官网</a><br><a href="https://gatling.io/docs/current/cheat-sheet/" title="Gatling API" target="_blank" rel="noopener">Gatling API</a><br><a href="http://blog.csdn.net/dongmu1986/article/category/2216251" title="博客都是写着玩儿" target="_blank" rel="noopener">博客都是写着玩儿</a></li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2018/06/22/gatling/">看码农如何一点一点了解Gatling并战胜他</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">星星独立博客</a></p>
        <p><span>发布时间:</span>2018-06-22, 17:16:04</p>
        <p><span>最后更新:</span>2018-06-22, 17:19:19</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2018/06/22/gatling/" title="看码农如何一点一点了解Gatling并战胜他">http://anzhongguancha.cn/2018/06/22/gatling/</a>
            <span class="copy-path" data-clipboard-text="原文: http://anzhongguancha.cn/2018/06/22/gatling/　　作者: 星星独立博客" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2018/06/12/my-new-post/">
                    新文章122
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Gatling-介绍"><span class="toc-number">1.</span> <span class="toc-text">Gatling 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Gatling-特点"><span class="toc-number">1.1.</span> <span class="toc-text">Gatling 特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gatling使用场景"><span class="toc-number">1.2.</span> <span class="toc-text">Gatling使用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Gatling-使用"><span class="toc-number">2.</span> <span class="toc-text">Gatling 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Gatling-安装"><span class="toc-number">2.1.</span> <span class="toc-text">Gatling 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gatling-项目配置"><span class="toc-number">2.2.</span> <span class="toc-text">Gatling 项目配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gatling开发"><span class="toc-number">2.3.</span> <span class="toc-text">Gatling开发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Gatling-Api"><span class="toc-number">3.</span> <span class="toc-text">Gatling Api</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#提交方式"><span class="toc-number">3.1.</span> <span class="toc-text">提交方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Feeder-实现数据动态化"><span class="toc-number">3.2.</span> <span class="toc-text">使用Feeder 实现数据动态化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从请求中获取"><span class="toc-number">3.3.</span> <span class="toc-text">从请求中获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用各种JAVA函数生成"><span class="toc-number">3.4.</span> <span class="toc-text">用各种JAVA函数生成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gatling-循环"><span class="toc-number">3.5.</span> <span class="toc-text">Gatling 循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hook-函数"><span class="toc-number">3.6.</span> <span class="toc-text">Hook 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#场景拆分"><span class="toc-number">3.7.</span> <span class="toc-text">场景拆分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置虚拟用户"><span class="toc-number">3.8.</span> <span class="toc-text">配置虚拟用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#check的使用和场景失败的处理"><span class="toc-number">3.9.</span> <span class="toc-text">check的使用和场景失败的处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试操作"><span class="toc-number">3.10.</span> <span class="toc-text">测试操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Gatling-报告介绍"><span class="toc-number">4.</span> <span class="toc-text">Gatling 报告介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#启动测试"><span class="toc-number">4.1.</span> <span class="toc-text">启动测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#报告信息"><span class="toc-number">4.2.</span> <span class="toc-text">报告信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-number">5.</span> <span class="toc-text">参考资料</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"看码农如何一点一点了解Gatling并战胜他　| 星星独立博客　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
        <section class="youyan" id="comments">
    <script>
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = 'http://v2.uyan.cc/code/uyan.js?uid=';
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <aside class="comment-bar">
        <a href="javascript:void(0);">
            <i class="fa fa-commenting-o animated infinite pulse"></i>
            <i class="fa fa-spinner fa-pulse"></i>
            <span class="count-comment"></span>
        </a>
    </aside>
    <script>
        var $commentBar = $("#comments aside.comment-bar");
        var load$hide = function(){
            $commentBar.find("a > i").toggle();
            loadComment();
            $commentBar.fadeOut(800);
        }
        $commentBar.click(function(){
            load$hide();
        })
        $commentBar.children("a").hover(function(){
            load$hide();
        })
        if (window.location.hash === "#comments") {
            load$hide();
        }
    </script>

    <div id="uyan_frame"></div>
</section>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/" title="回到主页"><i class="fa fa-home"></i></a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2018/06/12/my-new-post/" title="下一篇: 新文章122">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/06/22/gatling/">看码农如何一点一点了解Gatling并战胜他</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/12/my-new-post/">新文章122</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/08/hello-world/">Hello World</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2018 星星独立博客
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>